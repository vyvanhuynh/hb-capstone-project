{% extends 'base.html' %}
{% block title %}Pet Care Discussion Forum{% endblock %}

{% block body %}

    <h1>Pet Care Discussion Forum</h1>

    <fieldset>
    <legend>Ask A Question</legend>
    <form action="/forum" method="POST">
        <p>
            Your question 
        </p>
        <textarea type="text" name="new_question" id="new_question"></textarea>
        <p>
            <input type="submit" name="new question">
        </p>
    </form>
    </fieldset>

    <h3>
        Do you need to look up for a vet nearby?
        <a href="/map">Look up nearby vet</a>
    </h3>

    <h2>Questions and Answers</h2>
    <ol>
    {% for question in questions|sort(attribute='vote_count', reverse = True) %}
        <li>
            <form action="/forum" method="POST">
            <input type="hidden" id="question_id" name="question_id" value={{question.question_id}}>
            <p>{{ question.question_body }}
                <input type="submit" name="new vote" value="Vote" >
                Vote number: {{ question.vote_count }}
            </p>

            <ul>
                {% for answer in question.answers %}
                    <li>{{ answer.answer_body }}</li>
                {% endfor %}
                    <p>
                        Your answer <input type="text" name="new_answer">
                    </p>
                    <p>
                        <input type="submit" name="new answer">
                    </p>
            </ul>
            </form>
        </li>
    {% endfor %}
    </ol>

 
{% endblock %}

    
